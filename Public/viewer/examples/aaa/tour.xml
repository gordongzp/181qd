<!--
	krpano Virtual Tour Demo - Kuchlerhaus
		http://krpano.com/tours/kuchlerhaus/

	The tour images were build fully automatic with the MAKE VTOUR Droplet,
	but the skin itself and the hotspots are fully custom xml code.

	Note - this is an reduced example (smaller images, stronger compression, fewer panos) to keep the download package small!
-->
<krpano>
	<!-- 右键菜单 -->
	<include url="contextmenu.xml" />

	<!-- hotspot styles -->
	<style name="arrowspot1" url="skin/pfeil1.png" distorted="true" />
	<style name="arrowspot2" url="skin/pfeil2.png" distorted="true" />
	<style name="arrowspot3" url="skin/pfeil3.png" distorted="true" />
	<style name="arrowspot4" url="skin/pfeil4.png" distorted="true" />
	<style name="arrowspot5" url="skin/pfeil5.png" distorted="true" />
	<style name="zoomspot"   url="skin/zoomicon.png" distorted="true" />

	<!-- 开始场景 -->
	<action name="startup" autorun="onstart">
		if(startscene === null, set(startscene,get(scene[0].name)) );
		loadscene(get(startscene),null,MERGE);
		addthumbs();
	</action>

	<!-- 跳转 -->
	<action name="get_url">
		def(uuu, string, '');
		txtadd(uuu,'http://www.baidu.com?ath=',get(hotspot[0].ath),'&amp;atv=',get(hotspot[0].atv));
		openurl(get(uuu));
	</action>
	
	<!-- the action for dragging the hotspot - call it once in the ondown event -->
	<action name="draghotspot">
		spheretoscreen(ath, atv, hotspotcenterx, hotspotcentery, 'l');
		sub(drag_adjustx, mouse.stagex, hotspotcenterx);
		sub(drag_adjusty, mouse.stagey, hotspotcentery);
		asyncloop(pressed,
			sub(dx, mouse.stagex, drag_adjustx);
			sub(dy, mouse.stagey, drag_adjusty);
			screentosphere(dx, dy, ath, atv);
			print_hotspot_pos();
		  );
	</action>

	<scene name="scene_a" title="aussen" onstart="" thumburl="panos/aussen/thumb.jpg">

		<view hlookat="0" vlookat="0" fovtype="MFOV" fov="95" fovmin="45" fovmax="120" />

		<preview url="panos/aussen/preview.jpg" />

		<image>
			<cube url="panos/a/mobile_%s.jpg" />
		</image>

		<hotspot name="spot_1"   style="arrowspot1" ath="10"     atv="20"  scale="0.40" ondown="draghotspot();"/>
		<hotspot name="spot_2"   style="arrowspot2" ath="100"     atv="200"  scale="0.40" onclick="get_url();" />

	</scene>

</krpano>
